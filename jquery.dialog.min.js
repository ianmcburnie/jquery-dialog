
(function($){$.fn.dialogButton=function dialogButton(options){return this.each(function onEach(){var $dialogButton=$(this);var dialogId=$dialogButton.attr('aria-controls');var dialogOptions=options||$dialogButton.data('dialog');var $dialog=$('#'+dialogId);$dialog.on('dialogClose',function(e){$dialogButton.focus();});$dialogButton.on('click',function(e){$dialog.dialog(dialogOptions);});});};$.fn.dialog=function dialog(options){return this.each(function onEach(){var $dialog=$(this);var opts=$.extend({},$.fn.dialog.defaults,options);var $body=$('body');var $header=$dialog.find('header');var $heading=$header.find('> h2');var $doc=$dialog.find('> [role=document]');var $closeButton=$header.find('> button');var $autoFocusable=$doc.find('[autofocus]');var $focusable;var openTimeout;var closeTimeout;function close(){window.clearTimeout(openTimeout);$closeButton.off('click',close);$(document).off('escapeKeyDown',close);$.untrapKeyboard();$.untrapScreenreader();$body.removeClass('has-dialog');$dialog.attr('aria-hidden','true');closeTimeout=setTimeout(function(){$dialog.css('display','none');$dialog.trigger('dialogClose');},opts.transitionDurationMs);}
$dialog.nextId('dialog');$heading.nextId($dialog.prop('id')+'-title');$dialog.attr('aria-labelledby',$heading.prop('id'));$dialog.attr('role','dialog');$header.attr('role','banner');window.clearTimeout(closeTimeout);$dialog.css('display','block');openTimeout=setTimeout(function(){$dialog.attr('aria-hidden','false');$focusable=($autoFocusable.length>0)?$autoFocusable:$dialog.focusable();if($focusable.length===0){$doc.attr('tabindex','-1').focus();}else{$focusable.first().focus();}
$.trapScreenreader($dialog);$.trapKeyboard($dialog,{deactivateOnFocusExit:false});$body.addClass('has-dialog');$(document).commonKeyDown().on('escapeKeyDown',close);$closeButton.on('click',close);$dialog.trigger('dialogOpen');},10);});};}(jQuery));$.fn.dialog.defaults={transitionDurationMs:175};
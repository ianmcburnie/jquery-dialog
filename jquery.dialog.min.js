
(function($){$.fn.dialogButton=function dialogButton(options){return this.each(function onEach(){var $dialogButton=$(this);var dialogId=$dialogButton.data('jquery-dialog-button-for');var $dialog=$('#'+dialogId);$dialog.on('dialogClose',function(e){$dialogButton.focus();});$dialogButton.on('click',function(e){$dialog.dialog(options);});});};$.fn.dialog=function dialog(options){options=$.extend({},$.fn.dialog.defaults,options);return this.each(function onEach(){var $dialog=$(this);var dataTransitionOutDuration=$dialog.data('jquery-dialog-transition-out-duration');var dataType=$dialog.data('jquery-dialog-type');var transitionOutDuration=(dataTransitionOutDuration===undefined)?options.transitionOutDuration:dataTransitionOutDuration;var type=(dataTransitionOutDuration===undefined)?'dialog':dataType;var promptValue;var $body=$('body');var $header=$dialog.find('.dialog__header');var $dialogBody=$dialog.find('.dialog__body');var $heading=$header.find('> h2');var $dialogWindow=$dialog.find('.dialog__window');var $closeButton=$header.find('.dialog__close');var $dialogForm=$dialogBody.find('.dialog__form');var $dialogFormChoice=$('<input type="hidden" name="choice" />');var $autoFocusable=$dialogWindow.find('[autofocus]');var $focusable;var openTimeout;var closeTimeout;var onCloseButtonClick=function(){close();};var onFormButtonClick=function(){close();};var onKeyDown=function(e){if(e.keyCode===27){close();}};$dialogForm.append($dialogFormChoice);var onFormSubmitClick=function(e){var value=this.value||this.innerText;$dialogFormChoice.attr('value',value);};var onFormSubmit=function(e){e.preventDefault();close($(this).serializeArray());};function close(data){window.clearTimeout(openTimeout);$dialogForm.off('click','[type=submit]',onFormSubmitClick);$dialogForm.off('click','[type=button]',onFormButtonClick);$dialogForm.off('submit',onFormSubmit);$closeButton.off('click',onCloseButtonClick);$dialog.off('keydown',onKeyDown);$.untrapKeyboard();$.untrapScreenreader();$body.removeClass('has-dialog');$dialog.addClass('dialog--transition-out');$dialogFormChoice.remove();closeTimeout=setTimeout(function(){$dialog.prop('hidden',true);$dialog.removeClass('dialog--transition-out');$dialog.trigger('dialogClose',[data]);},transitionOutDuration);}
$dialog.nextId('dialog');$heading.nextId($dialog.prop('id')+'-title');$dialog.attr('aria-labelledby',$heading.prop('id'));$dialog.attr('role','dialog');window.clearTimeout(closeTimeout);$dialog.addClass('dialog--transition-in');$dialogForm.on('click','[type=submit]',onFormSubmitClick);$dialogForm.on('click','[type=button]',onFormButtonClick);$dialogForm.on('submit',onFormSubmit);$closeButton.on('click',onCloseButtonClick);openTimeout=setTimeout(function(){$dialog.prop('hidden',false);$dialog.removeClass('dialog--transition-in');$focusable=($autoFocusable.length>0)?$autoFocusable:$dialog.focusable();if($focusable.length===0){$dialogWindow.attr('tabindex','-1').focus();}else{$focusable.first().focus();}
$.trapScreenreader($dialog);$.trapKeyboard($dialog,{deactivateOnFocusExit:false});$body.addClass('has-dialog');$dialog.on('keydown',onKeyDown);$dialog.trigger('dialogOpen');},16);});};}(jQuery));$.fn.dialog.defaults={transitionOutDuration:0};